<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.appsys.mapper.UserCURDMapper">
	<select id="queryUser" resultType="User">
		SELECT u.*,t.typeName typeName 
		FROM USER u,TYPE t 
		WHERE u.typeId=t.id
		<if test="queryUserName != '' and queryUserName != null">
			AND u.userName LIKE CONCAT('%',#{queryUserName},'%')
		</if>
		<if test="queryUserGender != -1">
			AND gender = #{queryUserGender} 
		</if>
		<if test="queryUserTypeId != -1">
			AND typeId = #{queryUserTypeId}	
		</if>
	</select>
	<!-- 根据id来查询一条数据用户数据 -->
	<select id="QueryAdminById" resultType="User" parameterType="Integer">
		SELECT * FROM `user` WHERE id=#{id}
	</select>	
	<!-- 根据用户id来删除一个用户 -->
	<delete id="deleteUser" parameterType="Integer">
		DELETE FROM `user` WHERE id =#{id}
	</delete>
	<!-- 根据用户id来修改用户 -->
	<update id="updateUser">
		UPDATE `user` SET userName=#{userName},typeId=#{typeId},phone=#{phone},email=#{email},gender=#{gender},QQ=#{QQ},address=#{address},cardId=#{cardId} WHERE id=#{id}
	</update>
	<!-- 根据用户id来修改用户密码 -->
	<update id="updateUserPwd">
		UPDATE `user` SET userPwd=#{userPwd} WHERE id=#{id}	and userPwd=#{oldPwd}
	</update>
	<!-- 添加一个用户 -->
	<insert id="addUser" parameterType="User">
		INSERT INTO `user`
		VALUES (NULL,#{userName},#{typeId},#{phone},#{email},#{gender},#{QQ},#{address},#{cardId})
	</insert>
</mapper>